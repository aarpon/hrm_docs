.. include:: global_directives.inc

***************
Getting started
***************

Here is a quick guide to get you started with the HRM/HuCore deconvolution. In
order to optimize results, please refer to section
:ref:`advanced_deconvolution`.


.. _select_theme:

Select UI theme in HRM
========================

HRM offers two UI themes (dark, light) that can be selected from the login page.

|ThemeChoiceScreenshot|

|ThemesScreenshot|

The theme selected at the moment of logging in is preserved during the entire
session. In this manual screenshots from both themes are displayed
interchangeably. 

.. _create_an_account:

Create an account in HRM
========================

-  If your imaging facility already offers deconvolution via HRM, proceed to
   the facility's HRM login page.
   
-  If HRM is not available at your imaging facility you can still familiarize
   with HRM by using the `HRM demo server <http://hrm.svi.nl>`_ offered by SVI.

Follow the registration link on the HRM login page and complete the short
form. Names are case sensitive. Upon registration the new HRM
account needs to be validated by the administrator.

|RegistrationLink| |RegistrationForm|


Upload a raw image
==================

Upon successful logon the HRM `Home panel` will be displayed:

|HomePanel|

To upload images click on the `Raw images` icon |RawImages22x22|. The
following, intuitive upload tool allows for multiple uploads from your local
device:

|UploadFiles|


Deconvolve
==========

To submit a deconvolution job proceed to `Launch jobs` |StartJob22x22| from
the home panel. The process of submitting the job is split into the following
5 steps:


* |SelectImages48x48| **Step 1/5 - Select images**: click on the "Image File
  Format" drop
  down  widget to select the file type of the images to deconvolve.
  All uploaded files of that format will belisted.
  Use the |DownArrow22x22| |UpArrow22x22| icons to add/remove
  images to/from the selection. When selecting a file, a preview can be
  generated by using the link |GeneratePreviewLink| on the right hand side
  panel. The image preview also contains information about the dimensions,
  sampling and number of channels.


* |ImageParameters48x48| **Step 2/5 - Image parameters**: A parameter
  template describing the imaging conditions of acquisition system.
  The template can be created from scratch or derived from an existing one.
  Templates shared by other HRM users (including the administrator) can also
  be used. Choosing the correct parameters
  is **absolutely crucial** for obtaining high-quality deconvolution results.

  **Use an existing parameter template (easy)**: When selecting an existing
  parameter template the contents are displayed in the panel on the right
  hand side. Make sure that the  microscope type and the number of channels of
  the template match the images selected in Step 1/5.

  **Create a new parameter template (elaborated)**: Click the `New template`
  button |CreateTemplate22x22|. Type a name for the new template and click
  'Create'. The template editor opens, select the correct
  number of channels and PSF type. Move on to the optical parameters and
  select the correct microscope type. For a detailed explanation on the
  remaining parameters please refer to section :ref:`advanced_deconvolution`.

* |RestorationParameters48x48| **Step 3/5 - Restoration parameters**:
  As in the previous step it's possible to choose between an existing template
  or creating a new one.
  
  **Use existing parameter template (easy)**: Select a parameter template
  and verify its contents on the preview shown on the right hand side panel.
  Particularly, pay attention to the value of the Signal to Noise ratio (SNR)
  (see :ref:`signal_to_noise_ratio` for further help).
  
  **Create a new parameter template (elaborated)**:
  Click the `New template` button |CreateTemplate22x22|. Type a name for the
  new template and click 'Create'.
  Once in the template editor select a deconvolution algorithm (CMLE is 
  a good choice) and an SNR. Follow the instructions of the SNR
  estimator as a guide for the SNR of the selected images.
  Set the background mode to
  automatic, the number of iterations to 40 and the quality change to 0.01.
  For more detailed fine-tuning follow the instructions at
  :ref:`advanced_deconvolution`.

* |AnalysisParameters48x48| **Step 4/5 - Analysis parameters**: This step is
  only active when 2 or more channels have been specified in the previous
  steps. When active, the Analysis step allows the user to execute
  Colocalization analysis on the deconvolved images.

  **Use existing parameter template (easy)**: Select the analysis parameter
  template of your choice and verify that the values displayed on the preview
  on the right hand side panel match your analysis needs.

  **Create a new parameter template (elaborated)**:
  Click the `New template` button |CreateTemplate22x22|. Type a name for the
  new template and click 'Create'. Select whether colocalization
  should be enabled. For a colocalization run select the channels to be
  analyzed as well as the colocalization coefficients of interest.
  Set  the threshold to "Automatic estimation" and the Colocalization map
  to "Pearson". In order to further fine-tune the Colocalization parameters
  please refer to :ref:`advanced_deconvolution`.


* |LaunchJob48x48| **Step 5/5 - Launch job**: Select the output file format
  for the restored images. ICS and HDF5 are the recommended formats because
  they provide good dynamic range and the necessary meta data infrastructure to
  save all the image parameters. Plus, they allow for good compression levels
  that minimize the amount of disk space needed for storage. Next, review the
  parameter summaries as well as the image selection. If all the settings are
  correct then proceed to submit the job to the server by clicking
  |SubmitJob30x22|.


Queue
=====

After submitting the job HRM returns to the Home panel. Access the queue by
clicking |JobQueue22x22|. A typical processing queue looks like the following:

|JobQueueScreenshot|

The queue is handled in an intelligent way,
allowing jobs from different users to be processed at different times.

.. _results:

Results
=======

When a deconvolution and analysis job is finished a notification email is sent
with a link to the result. Alternatively, go to the HRM home panel and click
on the `Results` icon
|Results22x22|. The contents of the `Results` folder will be listed. Select the
image that you would like to visualize and a preview will be displayed on the
right hand side panel:

|ResultImages|


For a detailed view of both the raw image and the restored image click on
|DetailedViewLink|.

A results page opens showing `MIP <http://www.svi.nl/MIP>`_,
`SFP <http://www.svi.nl/SFP>`_ and slicer comparisons of the raw image versus
the deconvolved image. Summary tables show information about possible scaling
factors, colocalization results, image parameters and deconvolution parameters.
Also, movies along the Z direction and/or through time will be available for
download.

|DetailedViewScreenshot|

Tips & Tricks
=============


* When a deconvolution run gives optimal results download the processed
  data from the detailed view by clicking on |DownloadResults22x22|.
* Click |ShareTemplate22x22| at steps 2, 3 or 4 to share any of the templates
  with one or more colleagues.
* To optimize the deconvolution results it is necessary to understand the
  different properties of the image and some of the mechanisms behind
  deconvolution. This introductory chapter skipped details that can make a
  difference on images with spherical aberration, extreme SNR values,
  undersampling, etc. For a detailed explanation please see
  :ref:`advanced_deconvolution`.
